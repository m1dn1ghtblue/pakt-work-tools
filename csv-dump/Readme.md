# Создание анонимного дампа  базы данных в CSV формате
- `.CSV` дамп формируется для базы данных используемой в системе `pakt-work-tools` (см. [pakt-work-tools](https://github.com/remshu-inc/pakt-work-tools) - `readme.md` - установка - п. 1).  
- Сохранение данных корпуса в таком формате позволяет предоставлять доступ к обезличенной информации при этом упрощая процесс передачи самих данных, так как при работе с `.csv` пользователю не потребуется устанавливать СУБД, разворачивать систему и создавать базу данных.
- На основе полученных `.csv` файлов можно проводить анализ над корпусной разметкой различными средствами, в том числе, такой формат позволяет импортировать данные в собственную базу данных пользователя.

## 1. Файловая структура 
1. __data__ - папка для сохранения полученного дампа
2. __scripts__ - папка содержащая скрипты сборки дампа:
    
    1. __pakt-to-csv.py__ - основной скрипт отвечающий за сборку дампа
    2. __source__ - папка содержащая _SQL_-запросы к базе данных:
        - __get_text_info.sql__  - получение информации о текстах корпуса
        - __get_token_info__ - получение информации о токенах
        - __get_markup_info.sql__ - получение информации о разметке
        - __get_token_markup_connection.sql__ - создание таблицы связи между токенами и разметкой
3. __requirements.txt__  - перечень используемых библиотек для _Python_.
## 2. Структура дампа
 1.  __Text.csv__ - содержит информацию о каждом выгруженном тексте:
 
 - |Столбец|Описание|Ключ|
    |-----------|-------------|--------|
    |text_id|Идентификатор текста|PK|
    |header|Название текста|-|
    |course_number|Номер курса|-|
    |asessment|Оценка преподавателя|-|
    |raw_text|Исходный текст|-|
2. __Token.csv__ - содержит информацию о выгруженных токенах:
 - |Столбец|Описание|Ключ|
    |-----------|-------------|--------|
    |text_id|Идентификатор текста|FK (Text.csv)|
    |token_id|Идентификатор токена|PK|
    |text|Текст токена|-|
    |sentence_number|Порядковый номер предложения в тексте|-|
    |token_number|Порядковый номер токена в предложении|-|

3. __Markup.csv__ - содержит информацию о разметке ошибок:
 - |Столбец|Описание|Ключ|
    |-----------|-------------|--------|
    |markup_id|Идентификатор аннотации|PK|
    |reason|Причина ошибки|-|
    |grade|Грубость ошибки|-|
    |error_tag|Название тега ошибки|-|
    |correct|Исправление|-|

4. __Connection.csv__ - реализует связь между __Token.csv__ и __Markup.csv__:
 - |Столбец|Описание|Ключ|
    |-----------|-------------|--------|
    |markup_id|Идентификатор разметки|FK (Markup.csv)|
    |token_id|Идентификатор токена|FK (Token.csv)|

## 3. Установка и запуск
1. Перед первым запуском необходимо установить все необходимые библиотеки для _Python_:

        pip install -r requirements.txt
2. Для создания дампа необходимо запустить скрипт __scripts/pakt-to-csv.py__

        python .\scripts/pakt-to-csv.py
    
3. После запуска скрипта потребуется указать следующие данные для доступа к базе данных:

    - Имя пользователя БД
    - Пароль
    - Название базы данных

    >_Иные параметры подключения описаны при определении переменной __engine__ в скрипте __scripts/pakt-to-scv.py___
    
    > _Изначально указаны стандартные параметры для MySQL_

4. В результате выполнения в папке __data__ будут созданы/изменены _.csv_ - файлы (см. раздел 2)
