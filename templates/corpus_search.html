{% extends "base.html" %} {% load static %} {% block link %}
<link rel="stylesheet" type="text/css" href="{% static 'css/table_fix.css' %}" />
<link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
<link
	rel="stylesheet"
	href="https://cdn.jsdelivr.net/npm/select2-bootstrap-5-theme@1.3.0/dist/select2-bootstrap-5-theme.min.css"
/>
<link rel="stylesheet" type="text/css" href="{% static 'css/select2.css' %}" />
{% endblock link %}

<!-- Content -->
{% block content %}
<main class="container my-4">
	<!-- Search menu -->
	<form action="{% url 'corpus_search' %}" method="post" novalidate class="text-secondary col-11 col-lg-6 mx-auto">
		{% comment %}{% csrf_token %}{% endcomment %}
		<div class="input-group">
			{{ search_form.header }}
			<button
				type="button"
				class="btn btn-outline-secondary shadow-none"
				title="Фильтр"
				data-bs-toggle="collapse"
				data-bs-target="#filter"
				aria-expanded="false"
				aria-controls="filter"
			>
				<svg
					class="bi"
					xmlns="http://www.w3.org/2000/svg"
					height="1.6em"
					stroke="currentColor"
					fill="none"
					viewBox="0 0 24 24"
				>
					<path
						stroke-linecap="round"
						stroke-width="1.5"
						d="M20.058 9.723c.948-.534 1.423-.801 1.682-1.232.26-.43.26-.949.26-1.987v-.69c0-1.326 0-1.99-.44-2.402C21.122 3 20.415 3 19 3H5c-1.414 0-2.121 0-2.56.412C2 3.824 2 4.488 2 5.815v.69c0 1.037 0 1.556.26 1.986.26.43.733.698 1.682 1.232l2.913 1.64c.636.358.955.537 1.183.735.474.411.766.895.898 1.49.064.284.064.618.064 1.285v2.67c0 .909 0 1.364.252 1.718.252.355.7.53 1.594.88 1.879.734 2.818 1.101 3.486.683.668-.417.668-1.372.668-3.282v-2.67c0-.666 0-1 .064-1.285a2.68 2.68 0 0 1 .899-1.49"
					/>
				</svg>
			</button>
			<button type="submit" class="btn btn-primary shadow-none" title="Поиск">
				<svg
					class="bi"
					xmlns="http://www.w3.org/2000/svg"
					height="1.6em"
					stroke="currentColor"
					fill="none"
					viewBox="0 0 24 24"
				>
					<path
						stroke-linecap="round"
						stroke-width="1.5"
						d="M18.5 18.5 22 22M6.75 3.27a9.5 9.5 0 1 1-3.48 3.48"
					/>
				</svg>
			</button>
		</div>
		<div class="collapse" id="filter">
			<div class="p-3 card">
				<div class="row justify-content-between align-items-end">
					<label for="{{ search_form.user.id_for_label }}" class="form-label col-6">
						Автор {{ search_form.user }}
					</label>
				</div>
				<div class="row justify-content-evenly align-items-end">
					<label for="{{ search_form.language.id_for_label }}" class="form-label col-6">
						Язык {{ search_form.language }}
					</label>
					<label for="{{ search_form.text_type.id_for_label }}" class="form-label col-6">
						Тип текста {{ search_form.text_type }}
					</label>
				</div>
				<div class="row justify-content-evenly align-items-end">
					<label for="{{ search_form.pos_check.id_for_label }}" class="form-label col-6">
						Проверка частеречной разметки {{ search_form.pos_check }}
					</label>
					<label for="{{ search_form.error_tag_check.id_for_label }}" class="form-label col-6">
						Проверка разметки ошибок {{ search_form.error_tag_check }}
					</label>
				</div>
				<div class="row justify-content-evenly align-items-end">
					<label for="{{ search_form.emotional.id_for_label }}" class="form-label col-6">
						Эмоционально-физиологическое состояние {{ search_form.emotional }}
					</label>
					<label for="{{ search_form.write_place.id_for_label }}" class="form-label col-6">
						Где написан текст {{ search_form.write_place }}
					</label>
				</div>
				<div class="row justify-content-evenly align-items-end">
					<label for="{{ search_form.create_date.id_for_label }}" class="form-label col-6">
						Дата создания {{ search_form.create_date }}
					</label>
					<label for="{{ search_form.modified_date.id_for_label }}" class="form-label col-6">
						Дата модификации {{ search_form.modified_date }}
					</label>
				</div>
			</div>
		</div>
	</form>

	<a href="{% url 'new_text' %}" class="btn btn-primary ms-4 mt-3">
		<svg
			class="bi me-1"
			xmlns="http://www.w3.org/2000/svg"
			height="1.6em"
			stroke="currentColor"
			fill="none"
			viewBox="0 0 24 24"
		>
			<path
				stroke-linecap="round"
				stroke-width="1.5"
				d="M15 12h-3m0 0H9m3 0V9m0 3v3M7 3.338A9.954 9.954 0 0 1 12 2c5.523 0 10 4.477 10 10s-4.477 10-10 10S2 17.523 2 12c0-1.821.487-3.53 1.338-5"
			/>
		</svg>

		Новый текст
	</a>
	{% if text_list %}
	<table class="table table-hover card-rounded bg-white shadow my-4">
		<thead class="table-light">
			<tr>
				<th class="px-3 py-2">Название текста</th>
				<th>Автор</th>
				<th>Язык</th>
				<th>Тип текста</th>
				<th class="d-none d-md-table-cell">Дата создания</th>
				<th class="d-none d-md-table-cell">Дата модификации</th>
			</tr>
		</thead>
		<tbody>
			{% for text in text_list %}
			<tr>
				<td class="ps-3">
					<a
						class="link-primary text-decoration-none d-flex gap-2"
						href="{% url 'text_view' language=text.language text_type=text.text_type text_id=text.id_text %}"
					>
						<svg
							class="bi flex-shrink-0"
							xmlns="http://www.w3.org/2000/svg"
							height="1.6em"
							stroke="currentColor"
							fill="none"
							viewBox="0 0 24 24"
						>
							<path
								stroke-width="1.5"
								d="m18.18 8.04.463-.464a1.966 1.966 0 1 1 2.781 2.78l-.463.464M18.18 8.04s.058.984.927 1.853 1.854.927 1.854.927M18.18 8.04l-4.26 4.26c-.29.288-.434.433-.558.592-.146.188-.271.39-.374.606-.087.182-.151.375-.28.762l-.413 1.24-.134.401m8.8-5.081-4.26 4.26c-.29.29-.434.434-.593.558-.188.146-.39.271-.606.374-.182.087-.375.151-.762.28l-1.24.413-.401.134m0 0-.401.134a.53.53 0 0 1-.67-.67l.133-.402m.938.938-.938-.938"
							/>
							<path
								stroke-linecap="round"
								stroke-width="1.5"
								d="M8 13h2.5M8 9h6.5M8 17h1.5M3 14v-4c0-3.771 0-5.657 1.172-6.828C5.343 2 7.229 2 11 2h2c3.771 0 5.657 0 6.828 1.172M21 14c0 3.771 0 5.657-1.172 6.828m-15.656 0C5.343 22 7.229 22 11 22h2c3.771 0 5.657 0 6.828-1.172m0 0c.944-.943 1.127-2.348 1.163-4.828"
							/>
						</svg>
						<span class="ellipsis">{{ text.header }} </span>
					</a>
				</td>
				<td>{{ text.user }}</td>
				<td>{{ text.language }}</td>
				<td>{{ text.text_type }}</td>
				<td class="d-none d-md-table-cell">
					{% if text.create_date %}{{ text.create_date }}{%else%}<span class="text-secondary">
						Неизвестно
					</span>
					{%endif%}
				</td>
				<td class="pe-3 d-none d-md-table-cell">
					{% if text.modified_date %}{{ text.modified_date }}{%else%}<span class="text-secondary">
						Неизвестно
					</span>
					{%endif%}
				</td>
			</tr>
			{% endfor %}
		</tbody>
	</table>
	{% else %}
	<div class="alert alert-warning fs-6 my-4" role="alert" id="warning-message">
		<svg
			class="bi me-2"
			xmlns="http://www.w3.org/2000/svg"
			stroke="currentColor"
			height="1.6em"
			fill="none"
			viewBox="0 0 24 24"
		>
			<path
				stroke-width="1.5"
				d="M8 3.5A1.5 1.5 0 0 1 9.5 2h5A1.5 1.5 0 0 1 16 3.5v1A1.5 1.5 0 0 1 14.5 6h-5A1.5 1.5 0 0 1 8 4.5v-1Z"
			/>
			<path
				stroke-linecap="round"
				stroke-width="1.5"
				d="m14.5 11-5 5m0-5 5 5M21 16c0 2.829 0 4.243-.879 5.122C19.243 22 17.828 22 15 22H9c-2.828 0-4.243 0-5.121-.878C3 20.242 3 18.829 3 16v-3m13-8.998c2.175.012 3.353.109 4.121.877C21 5.758 21 7.172 21 10v2M8 4.002c-2.175.012-3.353.109-4.121.877-.769.768-.865 1.946-.877 4.121"
			/>
		</svg>

		Не нашлось текстов, соответствующих фильтру
	</div>
	{% endif %}
</main>
{% endblock content %} {% block plugins %}
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
{% endblock plugins %} {% block script %}
<script type="text/javascript" src="{% static 'js/apply_select2.js' %}" defer></script>
{% endblock %}
